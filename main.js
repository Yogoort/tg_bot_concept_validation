(()=>{"use strict";function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,c=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw c}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(){var t,n,r,a,o,c,i=document.getElementById("gameCanvas"),s=i.getContext("2d"),l=!1,u=75,d=1,f=3,m=[],g=100,p=100,y=.4*g,v=.4*p,h=[],w=310,b=!1,I=0,E=0,x=0,S=1.5,B=3,L=.75,k=10,_=!1,M=!1,A=0,T=.2,D=30,C="Arial, sans-serif",q=60,O=q,j="black",G=.5,R=!1,z=document.getElementById("audio-loop-2"),N=document.getElementById("audio-explosion"),X={background:{src:"assets/png/BG_1.png"},car:{src:"assets/png/car.png"},road:{src:"assets/png/road.jpg"},cursor:{src:"assets/png/cursor.png"},obstacle:{src:"assets/png/tree.png"},explosion:{src:"assets/png/boom.png"},logo_swan:{src:"assets/png/logo.png"},timerIcon:{src:"assets/png/timer.png"},leftButton:{src:"assets/png/bttn.png"},rightButton:{src:"assets/png/bttn.png"},welcome_bg:{src:"assets/png/BG_1.png"},logo_txt:{src:"assets/png/LOGO_txt.png"},sec60_logo:{src:"assets/png/60sec-logo.png"},play_button:{src:"assets/png/BTTN-Blue.png"},game_over_bg:{src:"assets/png/BG_win.png"},screen_from_movie:{src:"assets/png/Screen-from-movie.png"},youtube_btn:{src:"assets/png/youtube_btn.png"},mono_btn:{src:"assets/png/mono.png"},privat_btn:{src:"assets/png/privat.png"}};document.addEventListener("DOMContentLoaded",$),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("welcome-screen"),t=document.getElementById("play-button"),n=document.querySelector(".youtube-button"),r=document.querySelector(".support-buttons");document.getElementById("game-over").style.display="none",document.getElementById("game-over").style.opacity="0",function(){var a=0,o=Object.keys(X).length;for(var c in X){var s=new Image;s.onload=function(){++a===o&&(e.style.backgroundImage="url(".concat(X.welcome_bg.src,")"),e.style.display="flex",n.addEventListener("click",(function(){z.pause()})),r.addEventListener("click",(function(){z.pause()})),R=!1,t.addEventListener("click",(function(){z.play(),e.style.display="none",i.style.display="block",R=!0,J(),H=1e3/60,P=Date.now(),oe()})))},s.src=X[c].src,X[c].element=s}}()})),i.addEventListener("click",F),i.addEventListener("touchstart",F);var H,P,W=0,Y=200;function F(e){if(!_){var r=Date.now();if(!(r-W<Y)){var a="click"===e.type?e.clientX:e.touches[0].clientX;("click"===e.type?e.clientY:e.touches[0].clientY)>n-80-20&&(a<100&&d>0?(d--,W=r):a>t-80-20&&d<f-1&&(d++,W=r)),ce()}}}function U(){t=window.innerWidth,n=window.innerHeight,i.width=t,i.height=n,a=t/f*d+(t/f-u)/2}function $(){document.getElementById("welcome-screen"),document.getElementById("play-button"),document.querySelector(".logo-txt"),document.querySelector(".sec60-logo")}function J(){R&&(document.querySelector(".tutorial-popup")||((r=document.createElement("div")).className="tutorial-popup",r.innerHTML='\n        <h2>Виконай рятувальну місію!</h2>\n        <div class="separator"></div> \x3c!-- Белая линия --\x3e\n        <p>Оминай перешкоди, тиснучи на стрілки.\n        <br>В тебе <b>'.concat(O,' </b> секунд.</br></p>\n        <div class="separator"></div> \x3c!-- Белая линия --\x3e\n        <h2>Успіху!</h2>\n    '),document.body.appendChild(r),i.addEventListener("click",(function(){K(),ce()}))))}function K(){R=!1,r&&(r.style.display="none")}function Q(){var e=Math.floor(Math.random()*f),n=t/f*e+(t/f-g)/2,r=60*(Math.random()-.5);m.push({x:n,y:-p,rotation:r})}function V(){var e=Math.random()*t/2,n=-w;h.push({x:e,y:n,frame:0,timer:0,delay:60*L})}function Z(){E=0,x=0,N.pause(),N.currentTime=0,b=!1}function ee(){_=!0,M=!0,A=0,clearInterval(ne),clearInterval(re),b=!0,N.pause(),N.currentTime=0}window.addEventListener("resize",U),U(),window.addEventListener("resize",$);var te,ne,re,ae=Date.now();function oe(){var r,i,S;requestAnimationFrame(oe),ae=Date.now(),(te=ae-P)>H&&(P=ae-te%H,s.clearRect(0,0,t,n),i=X.road.element,S=s.createPattern(i,"repeat"),s.fillStyle=S,s.save(),s.translate(E,x),s.translate(0,I),s.fillRect(0,-i.height,t,n+i.height),s.restore(),_||(I+=13)>=i.height&&(I=0),(r=s.createLinearGradient(0,0,0,120)).addColorStop(0,"rgba(0, 0, 0, 0.7)"),r.addColorStop(1,"rgba(0, 0, 0, 0)"),s.fillStyle=r,s.fillRect(0,0,t,120),function(){var t,r=X.obstacle.element,a=e(m);try{for(a.s();!(t=a.n()).done;){var o=t.value;s.save(),s.translate(o.x+g/2+E,o.y+p/2+x),s.rotate(o.rotation*Math.PI/180),s.drawImage(r,-g/2,-p/2,g,p),s.restore(),_||(o.y+=13)}}catch(e){a.e(e)}finally{a.f()}_||(m=m.filter((function(e){return e.y<n})))}(),function(){var t,r=X.explosion.element,a=Math.sqrt(25),o=r.width/a,c=r.height/a,i=e(h);try{for(i.s();!(t=i.n()).done;){var l=t.value;if(!(l.y>=n))if(l.delay>0)l.delay,l.delay--,_||(l.y+=13);else{if(l.frame<25){var u=l.frame%a*o,d=Math.floor(l.frame/a)*c;s.drawImage(r,u,d,o,c,l.x+E,l.y+x,310,w),b||(N.play(),b=!0),_||(l.timer+=1,l.timer>=1&&(l.frame++,l.timer=0,E=Math.random()*k-k/2,x=Math.random()*k-k/2,setTimeout(Z,1e3*L)))}_||(l.y+=13)}}}catch(e){i.e(e)}finally{i.f()}_||(h=h.filter((function(e){return e.y<n&&e.frame<25})))}(),function(){var e=X.car.element;a+=.2*(t/f*d+(t/f-u)/2-a);var r=n-150-100;s.drawImage(e,a+E,r+x,u,150)}(),function(){var e=80,r=X.leftButton.element;s.drawImage(r,20,n-e-20,e,e);var a=X.rightButton.element;s.save(),s.scale(-1,1),s.drawImage(a,20-t,n-e-20,e,e),s.restore()}(),_||(function(){var t,r=e(m);try{for(r.s();!(t=r.n()).done;){var o=t.value,c=o.x+g/2,i=o.y+p/2;if(a+u>c-y/2&&a<c+y/2&&n-10>i-v/2&&n-150-10<i+v/2)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}()&&ee(),function(){if(l){var e=Date.now();c=Math.floor((e-o)/1e3),(O=Math.max(q-c,0))<=0&&ee()}!function(){s.save(),s.font="".concat(D,"px ").concat(C),s.fillStyle="#ffffff";var e=X.logo_swan.element;if(s.drawImage(e,5,5,100,100),l){var n=X.timerIcon.element,r=Math.floor(O/60),a=O%60,o="".concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")),c=s.measureText(o).width,i=(s.measureText(o).height,20+.5*(30+D)),u=t/2-(80+c)/2;s.drawImage(n,u,20,30,30);var d=u+30+10;s.fillText(o,d,i)}s.restore()}()}()),_&&function(){var e,r;M&&(A+=T)>=1&&(A=1,M=!1),e=j,r=G*A,s.save(),s.fillStyle=e,s.globalAlpha=r,s.fillRect(0,0,t,n),s.restore();var a=document.getElementById("game-over");a.style.opacity=A,a.style.display="flex",document.getElementById("time").innerText=c}(),l||J())}function ce(){l||_||(l=!0,o=Date.now(),ne=setInterval(Q,1e3*S),re=setInterval(V,1e3*B),K())}function ie(e){new ActiveXObject("WScript.Shell").run(e)}i.addEventListener("click",ce),i.addEventListener("touchstart",ce),window.addEventListener("keydown",(function(e){if(l&&!_){var t=Date.now();if(t-W<Y)return;"ArrowLeft"===e.key&&d>0?(d--,W=t):"ArrowRight"===e.key&&d<f-1&&(d++,W=t)}ce()})),window.onload=function(){U(),_=!1,M=!1,l=!1,o=null,c=0,m=[],h=[]};var se=document.getElementById("mono-a"),le=document.getElementById("privat-a");se.addEventListener("click",(function(){return ie("https://send.monobank.ua/jar/61f6zuuMNc")})),le.addEventListener("click",(function(){return ie("https://www.privat24.ua/send/cb9nx")}))}()})();