(()=>{"use strict";function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,c=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw c}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}!function(){var t,n,r,a,o,c,s=document.getElementById("gameCanvas"),i=s.getContext("2d"),l=!1,u=75,d=1,f=3,m=[],g=100,p=100,y=.4*g,v=.4*p,h=[],b=310,w=!1,E=0,I=0,k=0,x=1.5,B=3,L=.75,S=10,_=!1,M=!1,A=0,T=.2,D=30,C="Arial, sans-serif",q=60,O=q,j="black",G=.5,N=!1,R=document.getElementById("audio-loop-2"),z=document.getElementById("audio-explosion"),H={background:{src:"assets/png/BG_1.png"},car:{src:"assets/png/car.png"},road:{src:"assets/png/road.jpg"},cursor:{src:"assets/png/cursor.png"},obstacle:{src:"assets/png/tree.png"},explosion:{src:"assets/png/boom.png"},logo_swan:{src:"assets/png/logo.png"},timerIcon:{src:"assets/png/timer.png"},leftButton:{src:"assets/png/bttn.png"},rightButton:{src:"assets/png/bttn.png"},welcome_bg:{src:"assets/png/BG_1.png"},logo_txt:{src:"assets/png/LOGO_txt.png"},sec60_logo:{src:"assets/png/60sec-logo.png"},play_button:{src:"assets/png/BTTN-Blue.png"},game_over_bg:{src:"assets/png/BG_win.png"},screen_from_movie:{src:"assets/png/Screen-from-movie.png"},youtube_btn:{src:"assets/png/youtube_btn.png"},mono_btn:{src:"assets/png/mono.png"},privat_btn:{src:"assets/png/privat.png"}};document.addEventListener("DOMContentLoaded",W),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("welcome-screen"),t=document.getElementById("play-button"),n=document.querySelector(".youtube-button"),r=document.querySelector(".support-buttons");document.getElementById("game-over").style.display="none",document.getElementById("game-over").style.opacity="0",function(){var a=0,o=Object.keys(H).length;for(var c in H){var i=new Image;i.onload=function(){++a===o&&(e.style.backgroundImage="url(".concat(H.welcome_bg.src,")"),e.style.display="flex",n.addEventListener("click",(function(){R.pause()})),r.addEventListener("click",(function(){R.pause()})),N=!1,t.addEventListener("click",(function(){R.play(),e.style.display="none",s.style.display="block",N=!0,$(),P=1e3/60,X=Date.now(),oe()})))},i.src=H[c].src,H[c].element=i}}()})),s.addEventListener("click",J),s.addEventListener("touchstart",J);var P,X,Y=0,F=200;function J(e){if(!_){var r=Date.now();if(!(r-Y<F)){var a="click"===e.type?e.clientX:e.touches[0].clientX;("click"===e.type?e.clientY:e.touches[0].clientY)>n-80-20&&(a<100&&d>0?(d--,Y=r):a>t-80-20&&d<f-1&&(d++,Y=r)),ce()}}}function U(){t=window.innerWidth,n=window.innerHeight,s.width=t,s.height=n,a=t/f*d+(t/f-u)/2}function W(){document.getElementById("welcome-screen"),document.getElementById("play-button"),document.querySelector(".logo-txt"),document.querySelector(".sec60-logo")}function $(){N&&(document.querySelector(".tutorial-popup")||((r=document.createElement("div")).className="tutorial-popup",r.innerHTML='\n        <h2>Виконай рятувальну місію!</h2>\n        <div class="separator"></div> \x3c!-- Белая линия --\x3e\n        <p>Оминай перешкоди, тиснучи на стрілки.\n        <br>В тебе <b>'.concat(O,' </b> секунд.</br></p>\n        <div class="separator"></div> \x3c!-- Белая линия --\x3e\n        <h2>Успіху!</h2>\n    '),document.body.appendChild(r),s.addEventListener("click",(function(){K(),ce()}))))}function K(){N=!1,r&&(r.style.display="none")}function Q(){var e=Math.floor(Math.random()*f),n=t/f*e+(t/f-g)/2,r=60*(Math.random()-.5);m.push({x:n,y:-p,rotation:r})}function V(){var e=Math.random()*t/2,n=-b;h.push({x:e,y:n,frame:0,timer:0,delay:60*L})}function Z(){I=0,k=0,z.pause(),z.currentTime=0,w=!1}function ee(){_=!0,M=!0,A=0,clearInterval(ne),clearInterval(re),w=!0,z.pause(),z.currentTime=0}window.addEventListener("resize",U),U(),window.addEventListener("resize",W);var te,ne,re,ae=Date.now();function oe(){var r,s,x;requestAnimationFrame(oe),ae=Date.now(),(te=ae-X)>P&&(X=ae-te%P,i.clearRect(0,0,t,n),s=H.road.element,x=i.createPattern(s,"repeat"),i.fillStyle=x,i.save(),i.translate(I,k),i.translate(0,E),i.fillRect(0,-s.height,t,n+s.height),i.restore(),_||(E+=13)>=s.height&&(E=0),(r=i.createLinearGradient(0,0,0,120)).addColorStop(0,"rgba(0, 0, 0, 0.7)"),r.addColorStop(1,"rgba(0, 0, 0, 0)"),i.fillStyle=r,i.fillRect(0,0,t,120),function(){var t,r=H.obstacle.element,a=e(m);try{for(a.s();!(t=a.n()).done;){var o=t.value;i.save(),i.translate(o.x+g/2+I,o.y+p/2+k),i.rotate(o.rotation*Math.PI/180),i.drawImage(r,-g/2,-p/2,g,p),i.restore(),_||(o.y+=13)}}catch(e){a.e(e)}finally{a.f()}_||(m=m.filter((function(e){return e.y<n})))}(),function(){var t,r=H.explosion.element,a=Math.sqrt(25),o=r.width/a,c=r.height/a,s=e(h);try{for(s.s();!(t=s.n()).done;){var l=t.value;if(!(l.y>=n))if(l.delay>0)l.delay,l.delay--,_||(l.y+=13);else{if(l.frame<25){var u=l.frame%a*o,d=Math.floor(l.frame/a)*c;i.drawImage(r,u,d,o,c,l.x+I,l.y+k,310,b),w||(z.play(),w=!0),_||(l.timer+=1,l.timer>=1&&(l.frame++,l.timer=0,I=Math.random()*S-S/2,k=Math.random()*S-S/2,setTimeout(Z,1e3*L)))}_||(l.y+=13)}}}catch(e){s.e(e)}finally{s.f()}_||(h=h.filter((function(e){return e.y<n&&e.frame<25})))}(),function(){var e=H.car.element;a+=.2*(t/f*d+(t/f-u)/2-a);var r=n-150-100;i.drawImage(e,a+I,r+k,u,150)}(),function(){var e=80,r=H.leftButton.element;i.drawImage(r,20,n-e-20,e,e);var a=H.rightButton.element;i.save(),i.scale(-1,1),i.drawImage(a,20-t,n-e-20,e,e),i.restore()}(),_||(function(){var t,r=e(m);try{for(r.s();!(t=r.n()).done;){var o=t.value,c=o.x+g/2,s=o.y+p/2;if(a+u>c-y/2&&a<c+y/2&&n-10>s-v/2&&n-150-10<s+v/2)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}()&&ee(),function(){if(l){var e=Date.now();c=Math.floor((e-o)/1e3),(O=Math.max(q-c,0))<=0&&ee()}!function(){i.save(),i.font="".concat(D,"px ").concat(C),i.fillStyle="#ffffff";var e=H.logo_swan.element;if(i.drawImage(e,5,5,100,100),l){var n=H.timerIcon.element,r=Math.floor(O/60),a=O%60,o="".concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")),c=i.measureText(o).width,s=(i.measureText(o).height,20+.5*(30+D)),u=t/2-(80+c)/2;i.drawImage(n,u,20,30,30);var d=u+30+10;i.fillText(o,d,s)}i.restore()}()}()),_&&function(){var e,r;M&&(A+=T)>=1&&(A=1,M=!1),e=j,r=G*A,i.save(),i.fillStyle=e,i.globalAlpha=r,i.fillRect(0,0,t,n),i.restore();var a=document.getElementById("game-over");a.style.opacity=A,a.style.display="flex",document.getElementById("time").innerText=c}(),l||$())}function ce(){l||_||(l=!0,o=Date.now(),ne=setInterval(Q,1e3*x),re=setInterval(V,1e3*B),K())}function se(e){window.open(e,"_blank","location=yes,scrollbars=yes,status=yes")}s.addEventListener("click",ce),s.addEventListener("touchstart",ce),window.addEventListener("keydown",(function(e){if(l&&!_){var t=Date.now();if(t-Y<F)return;"ArrowLeft"===e.key&&d>0?(d--,Y=t):"ArrowRight"===e.key&&d<f-1&&(d++,Y=t)}ce()})),window.onload=function(){U(),_=!1,M=!1,l=!1,o=null,c=0,m=[],h=[]};var ie=document.getElementById("mono-a"),le=document.getElementById("privat-a"),ue=document.getElementById("alert-btn"),de=document.getElementById("alert-btn-3");ie.addEventListener("click",(function(){return se("https://send.monobank.ua/jar/61f6zuuMNc")})),le.addEventListener("click",(function(){return open("https://www.privat24.ua/send/cb9nx")})),ue.addEventListener("click",(function(){console.log("alert btn click");try{open("https://send.monobank.ua/jar/61f6zuuMNc")}catch(e){alert(JSON.stringify(e))}})),de.addEventListener("click",(function(){console.log("alert btn3 click"),se("https://t.me/black_swan_ukraine/153")}))}()})();